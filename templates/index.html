<!DOCTYPE html>
<html>
<head>
<title>LeadVerse AI Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins;}
body{display:flex;background:#f4f6f9;}

/* Sidebar */
.sidebar{
width:220px;height:100vh;background:#111827;color:white;padding:20px;
}
.sidebar h2{margin-bottom:30px;}
.sidebar a{display:block;color:#cbd5e1;text-decoration:none;margin:15px 0;}
.sidebar a:hover{color:white;}

/* Main */
.main{flex:1;padding:30px;}

.top-bar{
display:flex;justify-content:space-between;margin-bottom:25px;
}

.search-box input{
padding:10px;border-radius:6px;border:1px solid #ccc;margin-right:5px;
}
.search-box button{
padding:10px 15px;background:#4f46e5;color:white;border:none;border-radius:6px;
}

/* KPI */
.cards{display:flex;gap:20px;margin-bottom:25px;}
.card{
background:white;padding:20px;flex:1;border-radius:10px;
box-shadow:0 4px 10px rgba(0,0,0,0.05);
}
.card h3{font-size:16px;color:#64748b;}
.card p{font-size:22px;font-weight:bold;margin-top:6px;}

/* Table */
table{width:100%;background:white;border-radius:10px;border-collapse:collapse;}
th,td{padding:14px;border-bottom:1px solid #eee;}
th{background:#f1f5f9;text-align:left;font-weight:500;}

.badge{
padding:4px 10px;border-radius:20px;font-size:12px;color:white;
}
.good{background:#16a34a;}
.mid{background:#f59e0b;}
.low{background:#ef4444;}

a{color:#2563eb;text-decoration:none;}

.export-btn{
margin-top:15px;display:inline-block;padding:10px 14px;
background:#10b981;color:white;border-radius:6px;text-decoration:none;
}
</style>
</head>

<body>

<div class="sidebar">
<h2>LeadVerse AI</h2>
<a href="#">Dashboard</a>
<a href="/export_excel">Export Leads</a>
<a href="/logout">Logout</a>
</div>

<div class="main">

<div class="top-bar">
<h1>Lead Intelligence</h1>

<form action="/search" method="POST" class="search-box">
<input name="keyword" placeholder="Search companies..." required>
<input name="city" placeholder="City">
<button>Search</button>
</form>
</div>

<!-- KPI CARDS -->
<div class="cards">
<div class="card">
<h3>Total Leads</h3>
<p>{{ companies|length }}</p>
</div>

<div class="card">
<h3>With Emails</h3>
<p>{{ companies|selectattr("email")|list|length }}</p>
</div>

<div class="card">
<h3>With LinkedIn</h3>
<p>{{ companies|selectattr("company_linkedin")|list|length }}</p>
</div>
</div>

<!-- TABLE -->
<table>
<tr>
<th>Company</th>
<th>Rating</th>
<th>Email</th>
<th>CEO</th>
<th>Links</th>
</tr>

{% for c in companies %}
<tr>
<td>
<strong>{{ c.name }}</strong><br>
<small>{{ c.address }}</small>
</td>

<td>
{% if c.rating >= 4 %}
<span class="badge good">{{ c.rating }}</span>
{% elif c.rating >= 3 %}
<span class="badge mid">{{ c.rating }}</span>
{% else %}
<span class="badge low">{{ c.rating }}</span>
{% endif %}
</td>

<td>
{% if c.email %}
<a href="mailto:{{ c.email }}">{{ c.email }}</a>
{% else %} ‚Äî {% endif %}
</td>

<td>
{% if c.ceo and '|' in c.ceo %}
<a href="{{ c.ceo.split('|')[1] }}" target="_blank">
{{ c.ceo.split('|')[0] }}
</a>
{% else %} ‚Äî {% endif %}
</td>

<td>
{% if c.website %}
<a href="{{ c.website }}" target="_blank">üåê</a>
{% endif %}

{% if c.company_linkedin %}
<a href="{{ c.company_linkedin }}" target="_blank">üè¢</a>
{% endif %}

{% if c.leadership_linkedin %}
<a href="{{ c.leadership_linkedin }}" target="_blank">üë§</a>
{% endif %}
</td>
</tr>
{% endfor %}
</table>

<a href="/export_excel" class="export-btn">Export Excel</a>

</div>
</body>
</html>
